# AI竞赛公开展示功能

## 🎯 功能概述

将原本每个用户独立的AI竞赛展示功能开放，允许所有用户查看平台上所有交易员的竞赛数据。

## 📝 修改内容

### 1. 后端API修改

#### 新增公开API端点
- **路径**: `GET /api/competition/public`
- **权限**: 无需认证，公开访问
- **功能**: 返回所有用户的所有交易员竞赛数据

#### 新增方法
- `GetPublicCompetitionData()` - 获取所有用户的竞赛数据
- `handlePublicCompetition()` - 处理公开竞赛请求

#### 修改的文件
- `api/server.go` - 添加新路由和处理函数
- `manager/trader_manager.go` - 添加新的数据获取方法

### 2. 前端UI修改

#### 新增功能
- **模式切换按钮**: 在竞赛页面添加"个人模式" ↔ "公开模式"切换
- **动态数据源**: 根据模式选择调用不同的API端点
- **状态显示**: 显示当前模式和交易员数量

#### 修改的文件
- `web/src/lib/api.ts` - 添加公开API调用方法
- `web/src/components/CompetitionPage.tsx` - 添加切换UI和逻辑

## 🔧 API端点对比

| 端点 | 认证要求 | 数据范围 | 用途 |
|------|----------|----------|------|
| `/api/competition` | 需要JWT认证 | 当前用户的交易员 | 个人竞赛数据 |
| `/api/competition/public` | 无需认证 | 所有用户的交易员 | 公开竞赛展示 |

## 🎨 UI功能

### 模式切换按钮
- **个人模式**: 👤 个人模式 - 显示仅当前用户的交易员
- **公开模式**: 🌐 公开模式 - 显示所有用户的交易员

### 状态信息
- 显示交易员数量和模式："X 交易员 • 仅我的" 或 "X 交易员 • 所有用户"

## 🚀 部署说明

1. **后端部署**: 重新编译并部署 `nofx-api`
2. **前端部署**: 重新构建并部署前端应用
3. **测试访问**: 访问竞赛页面，测试模式切换功能

## 📊 数据格式

公开API返回的数据格式与个人API相同，包含：
- `traders`: 交易员数组
- `count`: 交易员总数
- `timestamp`: 数据时间戳

每个交易员包含：
- `trader_id`: 交易员ID
- `trader_name`: 交易员名称
- `ai_model`: AI模型类型
- `total_equity`: 总权益
- `total_pnl`: 总盈亏
- `total_pnl_pct`: 总盈亏百分比
- `position_count`: 持仓数量
- `margin_used_pct`: 保证金使用率
- `is_running`: 是否运行中

## 🔒 安全考虑

- 公开端点不暴露敏感信息（如API密钥、私钥等）
- 只展示竞赛相关的公开数据
- 保留原有的个人端点用于用户自己的详细管理

## 🎯 使用场景

1. **平台展示**: 向潜在用户展示平台上的AI交易表现
2. **透明度**: 让用户了解整体交易生态
3. **竞争激励**: 看到其他用户的表现，激励竞争
4. **数据分析**: 研究不同AI策略的整体表现